-- Table: lehner_02272.hotels

-- DROP TABLE IF EXISTS lehner_02272.hotels;

CREATE TABLE IF NOT EXISTS lehner_02272.hotels
(
    id integer NOT NULL DEFAULT nextval('lehner_02272.hotels_id_seq'::regclass),
    name character varying(100) COLLATE pg_catalog."default" NOT NULL,
    address text COLLATE pg_catalog."default" NOT NULL,
    phone character varying(20) COLLATE pg_catalog."default" NOT NULL,
    email character varying(100) COLLATE pg_catalog."default",
    stars integer,
    created timestamp without time zone,
    rating numeric(3,2),
    CONSTRAINT hotels_pkey PRIMARY KEY (id)
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS lehner_02272.hotels
    OWNER to student;

-- Trigger: trigger_audit_hotels

-- DROP TRIGGER IF EXISTS trigger_audit_hotels ON lehner_02272.hotels;

CREATE OR REPLACE TRIGGER trigger_audit_hotels
    AFTER INSERT OR DELETE OR UPDATE 
    ON lehner_02272.hotels
    FOR EACH ROW
    EXECUTE FUNCTION lehner_02272.audit_trigger_function();

-- Trigger: trigger_cascade_delete_hotel

-- DROP TRIGGER IF EXISTS trigger_cascade_delete_hotel ON lehner_02272.hotels;

CREATE OR REPLACE TRIGGER trigger_cascade_delete_hotel
    BEFORE DELETE
    ON lehner_02272.hotels
    FOR EACH ROW
    EXECUTE FUNCTION lehner_02272.cascade_delete_hotel();